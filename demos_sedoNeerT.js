(self["webpackChunkfireformily"]=self["webpackChunkfireformily"]||[]).push([[72,553],{51395:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return b}});var n=t(67294),a=t(36158),r=t(49229),c=t(18042),l=t(40020),p=t(44742),s="https://unpkg.com/china-location@2.1.0/dist/location.json",i=e=>{var o=[],t=4,n=Object.values(e).map(((e,n)=>{if(!(n>t))return o.push({code:e.code,name:e.name}),e.children=Object.values(e.cities).map((t=>{var n=t.code===e.code?"".concat(t.code,"00"):t.code;return o.push({code:n,name:t.name,parent:e.code}),t.children=Object.entries(t.districts).map((t=>{var a=(0,p.default)(t,2),r=a[0],c=a[1],l=r===n||r==e.code?"".concat(r,"0000"):r;return o.push({code:l,name:c,parent:n}),{code:r,name:c}})),t})),e}));return{flatten:o,tree:n}},d=e=>fetch(s).then((e=>e.json())).then((e=>i(e))).then((o=>{var t=o.flatten;return t.filter((o=>o.parent===e))})),m=e=>{var o=[void 0,...e.map((e=>e.value))],t=e[e.length-1],n=Boolean(e.find((e=>void 0===e.label||e.__init)));return n?Promise.all(o.map(d)).then((e=>{var t=e.reduceRight(((e,t,n)=>e?t.map((t=>{var a=t.code===o[n+1];return{value:t.code,label:t.name,isLeaf:!1,children:a?e:void 0}})):t.map((e=>({value:e.code,label:e.name,isLeaf:!0})))),null);return t})):d(null===t||void 0===t?void 0:t.value).then((e=>e.map((e=>({value:e.code,label:e.name,isLeaf:3===o.length})))))},u=(e,o)=>{console.log("LABEL:",e);try{console.group(JSON.parse(JSON.stringify(o)))}catch(t){console.log("stringify error, origin: ",o)}console.groupEnd()},v={update:{load:e=>(u("add load args",e),Promise.resolve(e.$record)),cancel:e=>{u("add cancel args",e)},submit:(e,o)=>(u("add submit args",{data:e,scope:o}),Promise.resolve())}},f=(0,r.Np)(),h=e=>n.createElement("details",null,n.createElement("summary",null,"value of TreeNodes"),n.createElement("div",null,n.createElement("pre",null,(0,l.safeStringify)(e.value)))),x=(0,c.createSchemaField)({components:{TreeNodes:l.TreeNodes,Space:a.T,PopActions:l.PopActions,TreeBase:l.TreeBase,Code:h,Input:a.II,FormItem:a.xJ},scope:{loadData:m,actions:v}}),y={type:"object",properties:{layout:{type:"void","x-component":"Space","x-component-props":{style:{display:"flex",alignItems:"flex-start"}},properties:{tree:{type:"object","x-decorator":"FormItem","x-component":"TreeNodes","x-component-props":{loadData:"{{loadData}}"},properties:{label:{type:"string","x-read-pretty":!0,"x-component":"Input"},moveup:{type:"void","x-component":"TreeBase.Move","x-component-props":{to:"up"}},movedown:{type:"void","x-component":"TreeBase.Move","x-component-props":{to:"down"}},edit:{title:"\u7f16\u8f91",type:"object","x-component":"PopActions","x-component-props":{actions:"{{actions.update}}"},properties:{label:{type:"string","x-decorator":"FormItem","x-component":"Input"},value:{type:"string","x-decorator":"FormItem","x-component":"Input"}}}}},code:{type:"object","x-component":"Code","x-reactions":{dependencies:[".tree"],fulfill:{schema:{"x-value":"{{$deps[0]}}"}}}}}}}},g=()=>n.createElement(c.FormProvider,{form:f},n.createElement(x,{schema:y})),b=g}}]);