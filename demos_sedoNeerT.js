(self["webpackChunkfireformily"]=self["webpackChunkfireformily"]||[]).push([[72,553],{51395:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return y}});var a=o(67294),n=o(36158),r=o(49229),c=o(18042),l=o(76892),p=o(44742),s="https://unpkg.com/china-location@2.1.0/dist/location.json",i=e=>{var t=[],o=Object.values(e).map((e=>(t.push({code:e.code,name:e.name}),e.children=Object.values(e.cities).map((o=>{var a=o.code===e.code?"".concat(o.code,"00"):o.code;return t.push({code:a,name:o.name,parent:e.code}),o.children=Object.entries(o.districts).map((o=>{var n=(0,p.default)(o,2),r=n[0],c=n[1],l=r===a||r==e.code?"".concat(r,"0000"):r;return t.push({code:l,name:c,parent:a}),{code:r,name:c}})),o})),e)));return{flatten:t,tree:o}},d=e=>fetch(s).then((e=>e.json())).then((e=>i(e))).then((t=>{var o=t.flatten;return o.filter((t=>t.parent===e))})),m=e=>{var t=[void 0,...e.map((e=>e.value))],o=e[e.length-1],a=Boolean(e.find((e=>void 0===e.label||e.__init)));return a?Promise.all(t.map(d)).then((e=>{var o=e.reduceRight(((e,o,a)=>e?o.map((o=>{var n=o.code===t[a+1];return{value:o.code,label:o.name,isLeaf:!1,children:n?e:void 0}})):o.map((e=>({value:e.code,label:e.name,isLeaf:!0})))),null);return o})):d(null===o||void 0===o?void 0:o.value).then((e=>e.map((e=>({value:e.code,label:e.name,isLeaf:3===t.length})))))},u=(e,t)=>{console.log("LABEL:",e);try{console.group(JSON.parse(JSON.stringify(t)))}catch(o){console.log("stringify error, origin: ",t)}console.groupEnd()},v={update:{load:e=>(u("add load args",e),Promise.resolve(e.$record)),cancel:e=>{u("add cancel args",e)},submit:(e,t)=>(u("add submit args",{data:e,scope:t}),Promise.resolve())}},f=(0,r.Np)(),h=e=>a.createElement("details",null,a.createElement("summary",null,"value of TreeNodes"),a.createElement("div",null,a.createElement("pre",null,(0,l.safeStringify)(e.value)))),b=(0,c.createSchemaField)({components:{TreeNodes:l.TreeNodes,Space:n.T,PopActions:l.PopActions,Code:h,Input:n.II,FormItem:n.xJ},scope:{loadData:m,actions:v}}),g={type:"object",properties:{layout:{type:"void","x-component":"Space","x-component-props":{style:{display:"flex",alignItems:"flex-start"}},properties:{tree:{type:"object","x-decorator":"FormItem","x-component":"TreeNodes","x-component-props":{loadData:"{{loadData}}",checkable:!0,selectable:!0},properties:{label:{type:"string","x-read-pretty":!0,"x-component":"Input"},edit:{title:"\u7f16\u8f91",type:"object","x-component":"PopActions","x-component-props":{actions:"{{actions.update}}"},properties:{label:{type:"string","x-decorator":"FormItem","x-component":"Input"},value:{type:"string","x-decorator":"FormItem","x-component":"Input"}}}}},code:{type:"object","x-component":"Code","x-reactions":{dependencies:[".tree"],fulfill:{schema:{"x-value":"{{$deps[0]}}"}}}}}}}},x=()=>a.createElement(c.FormProvider,{form:f},a.createElement(b,{schema:g})),y=x}}]);