(self["webpackChunkfireformily"]=self["webpackChunkfireformily"]||[]).push([[242],{26172:function(e,n,t){"use strict";t.r(n);var o=t(67294),r=t(96089),l=t(65659),c=o.memo((e=>{e.demos;return o.createElement(o.Fragment,null,o.createElement("div",{className:"markdown"},o.createElement("h2",{id:"-popactions---\u5f39\u7a97\u52a8\u4f5c"},o.createElement(r.AnchorLink,{to:"#-popactions---\u5f39\u7a97\u52a8\u4f5c","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\ud83d\udd2a PopActions - \u5f39\u7a97\u52a8\u4f5c"),o.createElement("p",null,"PopActions \u662f\u4e3a\u4e86\u89e3\u51b3\u5e38\u89c1\u7684 Popover/Popconfirm/Modal/Drawer \u5f39\u7a97\u7f16\u8f91\u5b50\u8868\u5355\u6a21\u677f\u4ee3\u7801\u7684\u95ee\u9898"),o.createElement("h2",{id:"\u4e3a\u4ec0\u4e48\u4e0d\u662f-formdialogformdrawer-"},o.createElement(r.AnchorLink,{to:"#\u4e3a\u4ec0\u4e48\u4e0d\u662f-formdialogformdrawer-","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u4e3a\u4ec0\u4e48\u4e0d\u662f ",o.createElement(r.Link,{to:"https://antd.formilyjs.org/zh-CN/components/form-dialog#formdialog-1"},"FormDialog"),"/",o.createElement(r.Link,{to:"https://antd.formilyjs.org/zh-CN/components/form-drawer#formdrawer-1"},"FormDrawer")," ?"),o.createElement("p",null,"\u8fd9\u4e24\u4e2a\u90fd\u662f\u65b9\u6cd5\u8c03\u7528, \u4e0d\u80fd\u7528 json \u63cf\u8ff0\u51fa\u6765\u6240\u4ee5 ",o.createElement("code",null,"FormDialog/FormDrawer")," \u9002\u5408\u7528\u4e8e\u66f4\u7075\u6d3b\u7684\u573a\u666f; \u6b64\u5916, ",o.createElement("code",null,"FormDialog/FormDrawer")," \u5185\u90e8\u662f\u4f7f\u7528\u4e86 ",o.createElement(r.Link,{to:"https://github.com/alibaba/formily/blob/formily_next/packages/antd/src/form-drawer/index.tsx#L122"},"document.body.appendChild")," \u51ed\u7a7a\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684 dom \u8282\u70b9\u6765\u627f\u8f7d\u8fd9\u4e2a\u8868\u5355, \u8131\u79bb\u4e86 root \u8282\u70b9, \u6240\u4ee5\u9700\u8981\u7528 ",o.createElement(r.Link,{to:"https://zh-hans.reactjs.org/docs/portals.html"},"Portals")," \u6253\u8865\u4e01, \u53ef\u80fd\u4f1a\u9047\u5230\u4e00\u4e9b\u5947\u5947\u602a\u602a\u7684\u95ee\u9898, \u52a0\u4e0a\u6211\u4eec\u7684\u76ee\u7684\u662f\u51cf\u5c11\u6a21\u7248\u4ee3\u7801\u7684\u5904\u7406, \u4e0d\u9700\u8981\u7f16\u7a0b\u5f0f\u90a3\u4e48\u7075\u6d3b;"),o.createElement("p",null,"\u56e0\u6b64\u5bf9\u4e8e\u5e38\u89c1\u7684\u5f39\u51fa\u8868\u5355\u5904\u7406\u903b\u8f91, \u5c1d\u8bd5\u5f52\u7eb3\u4e3a\u4e3a\u4e09\u4e2a\u56fa\u5b9a\u7684\u52a8\u4f5c"),o.createElement(l.Z,{code:"- open    // \u9884\u52a0\u8f7d? -> \u6253\u5f00\u5f39\u7a97\n- cancel  // \u53d6\u6d88 -> \u5173\u95ed\u5f39\u7a97\n- confirm // \u786e\u5b9a -> \u5173\u95ed\u5f39\u7a97",lang:"unknown"}),o.createElement("p",null,"\u5168\u90e8\u8f6c\u6362\u6210\u8868\u5355\u9886\u57df\u7684\u672f\u8bed, \u5728\u52a0\u4e0a ",o.createElement("code",null,"Promise")," \u5305\u88c5, \u53ef\u4ee5\u8fd9\u6837\u6765\u8868\u793a"),o.createElement(l.Z,{code:"interface Action<Record = any, Data = Record> {\n  /** \u52a0\u8f7d\u521d\u59cb\u503c **/\n  load: (record: Record) => Promise<Data>;\n  /** \u91cd\u7f6e\u8868\u5355, \u5173\u95ed\u5f39\u7a97 **/\n  reset: () => Promise<void>;\n  /** \u63d0\u4ea4\u8868\u5355, \u5173\u95ed\u5f39\u7a97 **/\n  submit: (data: Data) => Promise<any>;\n}",lang:"ts"}),o.createElement("p",null,"\u5148\u6765\u7406\u89e3\u4e00\u4e0b formily \u4f5c\u8005\u63d0\u5230\u7684 ",o.createElement(r.Link,{to:"https://github.com/alibaba/formily/discussions/3207"},"\u6807\u51c6\u5316CRUD\u4f5c\u7528\u57df\u53d8\u91cf\u89c4\u8303")," \u7684\u6982\u5ff5, \u8fd9\u91cc\u662f ",o.createElement(r.Link,{to:"https://react.formilyjs.org/zh-CN/api/components/record-scope"},"React \u5b9e\u73b0#RecordScope"),", \u8fd9\u91cc\u662f\u5b9e\u9645\u4f7f\u7528\u573a\u666f ",o.createElement(r.Link,{to:"https://github.com/alibaba/formily/blob/formily_next/packages/antd/src/array-base/index.tsx#L132"},"@formily/antd#ArrayBase.Item")),o.createElement("p",null,"\u51e0\u4e2a\u4f8b\u5b50:"),o.createElement("ol",null,o.createElement("li",null,o.createElement("p",null,"ArrayTable \u4e2d, \u5f39\u7a97\u7f16\u8f91, \u6b64\u65f6 ",o.createElement("code",null,"record")," \u662f\u53ea\u5f53\u524d\u884c\u7684\u6570\u636e, \u540c\u65f6\u6709 ",o.createElement("code",null,"index")," \u8868\u660e\u5f53\u524d\u4e0b\u6807, \u4ee5\u53ca ",o.createElement("code",null,"records")," \u8868\u660e\u6574\u4e2a\u6570\u7ec4, \u5bf9\u5e94\u5230 ",o.createElement("code",null,"ArrayBase.Item")," \u4e2d\u7684 ",o.createElement("code",null,"RecordScope"),", \u90a3\u4e48\u5c31\u53ef\u4ee5\u901a\u8fc7 ",o.createElement("code",null,"useExpressScope")," \u6765\u83b7\u53d6\u5230 ",o.createElement("code",null,"$record"),"/",o.createElement("code",null,"$index"),"/",o.createElement("code",null,"$lookup")," === ",o.createElement("code",null,"$records")," \u5bf9\u5e94\u4e0a\u9762\u63d0\u5230\u7684\u4e09\u4e2a\u6982\u5ff5")),o.createElement("li",null,o.createElement("p",null,"\u6807\u9898\u680f\u4e2d\u7684\u65b0\u589e\u5f39\u7a97, \u56e0\u4e3a\u662f\u5728 Table \u4e4b\u5916, \u6b64\u65f6 ",o.createElement("code",null,"$record"),"/",o.createElement("code",null,"$index"),"/",o.createElement("code",null,"$records")," \u4e0d\u5b58\u5728, \u4f46\u8fd9\u6837\u5c31\u6ca1\u610f\u4e49\u4e86\u5417? \u5e76\u4e0d\u662f. \u6bd4\u65b9\u8bf4\u6211\u4eec\u7684\u6570\u636e\u7ed3\u6784\u8fd9\u6837"),o.createElement(l.Z,{code:"const data = {\n  info: { name: 'antd' },\n  arr:[{ a: 1, b: 2, childOf: 'antd' }],\n}",lang:"ts"}))),o.createElement("p",null,"\u5047\u5982\u6211\u4eec\u8981\u65b0\u589e\u7684\u4e00\u6761\u8bb0\u5f55, \u5176\u4e2d ",o.createElement("code",null,"childOf")," \u5b57\u6bb5\u53d6\u503c\u4e3a ",o.createElement("code",null,"arr")," \u5144\u5f1f\u5b57\u6bb5, \u90a3\u4e48\u9664\u4e86"),o.createElement("ul",null,o.createElement("li",null,o.createElement("p",null,"\u4f7f\u7528 ",o.createElement("code",null,"x-reactions#dependencies")," \u7ed3\u5408 ",o.createElement("code",null,"FormPath")," \u6765\u89e3\u51b3"),o.createElement(l.Z,{code:"data: {\n  type: 'object',\n  properties: {\n    info: {\n      type: 'object',\n      //...\n    },\n    'actions.add': {\n      title: '\u65b0\u589e',\n      name: 'actions.add',\n      type: 'object',\n      properties: {\n        childOf: {\n          type: 'string',\n          'x-hidden': true,\n          'x-reactions': {\n            dependencies: ['.info'],\n            fullfill: {\n              schema: {\n                'x-value': '{{$deps[0].name}}'\n              }\n            }\n          }\n        }\n      }\n    },\n    arr: {\n      type: 'array',\n      // ...\n    }\n  }\n},",lang:"ts"})),o.createElement("li",null,o.createElement("p",null,"\u4e5f\u53ef\u4ee5\u5c06 ",o.createElement("code",null,"data")," \u62bd\u8c61\u4f5c\u4e3a ",o.createElement("code",null,"record"),", \u4f7f\u4e4b\u80fd\u80fd\u591f\u5728 ",o.createElement("code",null,"ArrayField#ArrayItem")," \u7684 ",o.createElement("code",null,"scope")," \u4e4b\u5916\u8bbf\u95ee\u5230;\u53ef\u4ee5\u7528\u8fd9\u6837\u7684\u4f2a\u4ee3\u7801\u6765\u7406\u89e3"),o.createElement(l.Z,{code:'<RecordScope getRecord={() => data}>\n  <ObjectField name="info"></ObjectField>\n  <ObjectField name="actions.add">\u65b0\u589e</ObjectField>\n  <ArrayField name="arr">\n    {data.arr.map((item, index) => {\n      return <RecordScope getIndex={() => index} getRecord={() => item}>\n        <StringField name="a"></StringField>\n        <StringField name="b"></StringField>\n        <StringField name="childOf"></StringField>\n      </RecordScope>\n    })}\n</ArrayField>\n</RecordScope>',lang:"tsx"}))),o.createElement("h2",{id:"\u63a8\u5e7f\u5f00\u6765-\u683c\u5c40\u6253\u5f00"},o.createElement(r.AnchorLink,{to:"#\u63a8\u5e7f\u5f00\u6765-\u683c\u5c40\u6253\u5f00","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u63a8\u5e7f\u5f00\u6765 ",o.createElement("del",null,"\u683c\u5c40\u6253\u5f00")),o.createElement("p",null,o.createElement("code",null,"$record")," \u6982\u5ff5\u7406\u89e3\u5f00\u6765, \u4e5f\u5c31\u662f\u6211\u4eec ",o.createElement("code",null,"load")," \u4e2d\u7684 ",o.createElement("code",null,"record"),", \u4f5c\u4e3a\u6d88\u8d39 ",o.createElement("code",null,"$record")," \u7684\u4e00\u4e2a\u7ec4\u4ef6, \u90a3\u4e48, \u8fd9\u4e2a\u52a8\u4f5c\u7684\u6cdb\u7528\u6027\u5c31\u5f88\u5e7f\u4e86"),o.createElement("p",null,"\u6bd4\u65b9\u8bf4: ",o.createElement("del",null,"\u5148\u6323\u4ed6\u4e00\u4e2a\u5c0f\u76ee\u6807")),o.createElement("ul",null,o.createElement("li",null,o.createElement("p",null,"rowSelection - \u5217\u9009\u62e9:"),o.createElement(l.Z,{code:"<RecordScope gerRecord={() => ({ selectedRows, selectedRowKeys })}>\n  <Actions.Popconfirm>\u6279\u91cf\u5220\u9664</Actions.Popconfirm>\n  <Actions.Modal>\u6279\u91cf\u5bfc\u51fa</Actions.Modal>\n</RecordScope>",lang:"tsx"}),o.createElement("p",null,"\u5c31\u53ef\u4ee5\u5728 Actions \u4e2d\u6d88\u8d39\u4efb\u610f ",o.createElement("code",null,"RecordScope")," \u4f20\u9012\u8fdb\u6765\u7684\u503c"))),o.createElement("h2",{id:"\u91cd\u65b0\u805a\u7126-focus-on-actions"},o.createElement(r.AnchorLink,{to:"#\u91cd\u65b0\u805a\u7126-focus-on-actions","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"\u91cd\u65b0\u805a\u7126 Focus on Actions"),o.createElement(l.Z,{code:"export type Actions<Record = any, Data = Record> = {\n  load?: (\n    scope: {\n      $record?: Record,\n      $index?: number,\n      $lookup?: object,\n      $records?: Record[],\n      // in querylist\n      $query?: object,\n      // in querylist\n      $list?: Record[],\n      // ...others\n    }\n  ) => Promise<Data>;\n  cancel?: (\n    scope: {\n      $record?: Record,\n      $index?: number,\n      $lookup?: object,\n      $records?: Record[],\n      // in querylist\n      $query?: object,\n      // in querylist\n      $list?: Record[],\n      // ...others\n    }\n  ) => Promise<any>;\n  submit?: (\n    data: Data,\n    scope: {\n      $record?: Record,\n      $index?: number,\n      $lookup?: object,\n      $records?: Record[],\n      // in querylist\n      $query?: object,\n      // in querylist\n      $list?: Record[],\n      // ...others\n    }\n  ) => Promise<any>;\n};",lang:"ts"}),o.createElement("p",null,"\u4e3a\u4ec0\u4e48 ",o.createElement("code",null,"load")," \u53ef\u80fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u503c? \u5f88\u7b80\u5355\u7684\u4f8b\u5b50: \u6839\u636e\u5217\u8868\u9879 id \u67e5\u8be2\u8be6\u60c5"),o.createElement("p",null,"\u5f97\u76ca\u4e8e formily \u4e2d,  \u975e ",o.createElement(r.Link,{to:"https://core.formilyjs.org/zh-CN/api/models/void-field"},"VoidField"),", \u90fd\u662f\u53ef\u4ee5\u5355\u72ec\u6267\u884c ",o.createElement("code",null,"reset/validate/submit")," \u52a8\u4f5c\u7684, \u6240\u4ee5\u53ef\u4ee5\u8f7b\u677e\u7684\u5229\u7528\u8fd9\u4e2a\u7279\u6027, \u5b9e\u73b0 ",o.createElement("code",null,"PopActions")," \u7684\u5b50\u8868\u5355\u7684 ",o.createElement("code",null,"\u91cd\u7f6e/\u6821\u9a8c/\u63d0\u4ea4")," \u52a8\u4f5c"),o.createElement("p",null,o.createElement("img",{src:t(91928),alt:"actoins"})),o.createElement("h2",{id:"api"},o.createElement(r.AnchorLink,{to:"#api","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"API"),o.createElement("p",null,"\u9ed8\u8ba4\u4e3a Popconfirm"),o.createElement(l.Z,{code:"export const PopActions = Modal as typeof Modal & {\n  Popover: typeof Popover;\n  Popconfirm: typeof Popconfirm;\n  Modal: typeof Modal;\n  Drawer: typeof Drawer;\n};\n\nexport interface IButtonType {\n  size?: React.ComponentProps<typeof Button>['size'];\n  type?: React.ComponentProps<typeof Button>['type'];\n}\n\nexport type CommonActions = {\n  actions: Actions,\n} & IButtonType;",lang:"tsx"}),o.createElement("h3",{id:"popactionsmodal---\u6a21\u6001\u6846\u5f39\u51fa"},o.createElement(r.AnchorLink,{to:"#popactionsmodal---\u6a21\u6001\u6846\u5f39\u51fa","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"PopActions.Modal - \u6a21\u6001\u6846\u5f39\u51fa"),o.createElement("h3",{id:"popactionsdrawer---\u62bd\u5c49\u5f39\u51fa"},o.createElement(r.AnchorLink,{to:"#popactionsdrawer---\u62bd\u5c49\u5f39\u51fa","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"PopActions.Drawer - \u62bd\u5c49\u5f39\u51fa"),o.createElement("h3",{id:"popactionspopconfirm---\u786e\u8ba4\u5f39\u51fa"},o.createElement(r.AnchorLink,{to:"#popactionspopconfirm---\u786e\u8ba4\u5f39\u51fa","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"PopActions.Popconfirm - \u786e\u8ba4\u5f39\u51fa"),o.createElement("h3",{id:"popactionspopover---\u8f7b\u91cf\u5f39\u7a97"},o.createElement(r.AnchorLink,{to:"#popactionspopover---\u8f7b\u91cf\u5f39\u7a97","aria-hidden":"true",tabIndex:-1},o.createElement("span",{className:"icon icon-link"})),"PopActions.Popover - \u8f7b\u91cf\u5f39\u7a97")))}));n["default"]=e=>{var n=o.useContext(r.context),t=n.demos;return o.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),o.createElement(c,{demos:t})}},91928:function(e,n,t){e.exports=t.p+"static/actions.1ae8ad06.jpg"}}]);