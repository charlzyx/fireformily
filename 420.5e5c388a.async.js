"use strict";(self.webpackChunkfireformily=self.webpackChunkfireformily||[]).push([[420],{27420:function(Qr,xe,F){F.r(xe),F.d(xe,{ArrayField:function(){return ve},ContextCleaner:function(){return Ke},ExpressionScope:function(){return Z},Field:function(){return Pe},FieldContext:function(){return N},FormConsumer:function(){return Ge},FormContext:function(){return ce},FormProvider:function(){return Ye},ObjectField:function(){return pe},Observer:function(){return Rr},RecordScope:function(){return zr},RecordsScope:function(){return Jr},RecursionField:function(){return Fe},Schema:function(){return V},SchemaComponentsContext:function(){return X},SchemaContext:function(){return W},SchemaExpressionScopeContext:function(){return L},SchemaMarkupContext:function(){return $},SchemaOptionsContext:function(){return fe},VoidField:function(){return he},connect:function(){return Mr},createSchemaField:function(){return Gr},mapProps:function(){return Ir},mapReadPretty:function(){return $r},observer:function(){return I},useExpressionScope:function(){return de},useField:function(){return C},useFieldSchema:function(){return Ar},useForm:function(){return w},useFormEffects:function(){return Vr},useParentForm:function(){return Nr}});var l=F(3567),b=F(85667),qe=Symbol.for("__REVA_ACTIONS"),Se={parent:!0,root:!0,properties:!0,patternProperties:!0,additionalProperties:!0,items:!0,additionalItems:!0,"x-linkages":!0,"x-reactions":!0},Ee={title:"title",description:"description",default:"initialValue",enum:"dataSource",readOnly:"readOnly",writeOnly:"editable","x-content":"content","x-data":"data","x-value":"value","x-editable":"editable","x-disabled":"disabled","x-read-pretty":"readPretty","x-read-only":"readOnly","x-visible":"visible","x-hidden":"hidden","x-display":"display","x-pattern":"pattern","x-validator":"validator","x-decorator":"decoratorType","x-component":"componentType","x-decorator-props":"decoratorProps","x-component-props":"componentProps"},Ce={required:!0,format:!0,maxItems:!0,minItems:!0,maxLength:!0,minLength:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,pattern:!0,const:!0,multipleOf:!0,maxProperties:!0,minProperties:!0,uniqueItems:!0},Wr=Object.keys(Ee),Xr=Object.keys(Ce),He=Object.prototype.hasOwnProperty,Ze=function(e,r){var t=[],n=e,i=function(a,o){if(o===void 0&&(o=[]),(0,l.isPlainObj)(a)){var c=t.indexOf(a);if(c>-1)return;var f=t.length;if(t.push(a),ee(a)&&n!==a){r(a,o);return}(0,l.each)(a,function(d,s){i(d,o.concat(s))}),t.splice(f,1)}else r(a,o)};i(e)},ke=function(e,r){e["x-validator"]!==void 0&&r(e["x-validator"],["x-validator"]);var t=[],n=e,i=function(a,o){var c;if(o===void 0&&(o=[]),!(o[0]==="x-compile-omitted"||o[0]==="x-validator"||o[0]==="version"||o[0]==="_isJSONSchemaObject")&&!(String(o[0]).indexOf("x-")==-1&&(0,l.isFn)(a))&&!Se[o[0]]){if(((c=e["x-compile-omitted"])===null||c===void 0?void 0:c.indexOf(o[0]))>-1){r(a,o,!0);return}if((0,l.isPlainObj)(a)){if(o[0]==="default"||o[0]==="x-value"){r(a,o);return}var f=t.indexOf(a);if(f>-1)return;var d=t.length;if(t.push(a),ee(a)&&n!==a){r(a,o);return}(0,l.each)(a,function(s,m){i(s,o.concat(m))}),t.splice(d,1)}else r(a,o)}};i(e)},ee=function(e){return!!("$$typeof"in e&&"_owner"in e||e._isAMomentObject||V.isSchemaInstance(e)||e[qe]||(0,l.isFn)(e.toJS)||(0,l.isFn)(e.toJSON)||(0,b.isObservable)(e))},er=function(e){return(0,l.toArr)(e).map(function(r){return typeof r=="object"?r:{label:r,value:r}})},Re=function(e,r,t){(0,b.untracked)(function(){var n,i=l.FormPath.parse(r),a=i.segments,o=a[0],c=o==="enum"&&(0,l.isArr)(t),f=Ee[o];if(f)l.FormPath.setIn(e,[f].concat(a.slice(1)),c?er(t):t);else{var d=Ce[o];d&&((n=e.setValidatorRule)===null||n===void 0||n.call(e,o,t))}})},rr=/^\s*\{\{([\s\S]*)\}\}\s*$/,K={silent:!1,compile:function(e,r){if(r===void 0&&(r={}),K.silent)try{return new Function("$root","with($root) { return (".concat(e,"); }"))(r)}catch(t){}else return new Function("$root","with($root) { return (".concat(e,"); }"))(r)}},nr=function(e){e===void 0&&(e=!0),K.silent=!!e},tr=function(e){(0,l.isFn)(e)&&(K.compile=e)},_=function(e,r){if((0,l.isStr)(e)){var t=e.match(rr);return t?K.compile(t[1],r):e}return e},Y=function(e,r){var t=[],n=function(i){if((0,l.isStr)(i))return _(i,r);if((0,l.isArr)(i))return i.map(function(f){return n(f)});if((0,l.isPlainObj)(i)){if(ee(i))return i;var a=t.indexOf(i);if(a>-1)return i;var o=t.length;t.push(i);var c=(0,l.reduce)(i,function(f,d,s){return f[s]=n(d),f},{});return t.splice(o,1),c}return i};return n(e)},we=function(e,r,t){Ze(r,function(n,i){var a=l.FormPath.parse(i),o=Y(n,t),c=a.segments[0];o!==void 0&&He.call(e,c)&&(0,b.untracked)(function(){return l.FormPath.setIn(e,a,o)})})},je=function(e,r,t,n){n===void 0&&(n=!1),ke(r,function(i,a,o){var c=i,f=(0,b.hasCollected)(function(){o||(c=Y(i,t))});c!==void 0&&(n?(f||!e.initialized)&&Re(e,a,c):Re(e,a,c))})},g=F(99619),ir=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a},_e={onFieldInit:g.onFieldInit,onFieldMount:g.onFieldMount,onFieldUnmount:g.onFieldUnmount,onFieldValueChange:g.onFieldValueChange,onFieldInputValueChange:g.onFieldInputValueChange,onFieldInitialValueChange:g.onFieldInitialValueChange,onFieldValidateStart:g.onFieldValidateStart,onFieldValidateEnd:g.onFieldValidateEnd,onFieldValidateFailed:g.onFieldValidateFailed,onFieldValidateSuccess:g.onFieldValidateSuccess},ar=["onFieldInit","onFieldValueChange"],re=function(e,r,t){var n=ir(String(r).split(/\s*#\s*/),2),i=n[0],a=n[1];return e.query(i).getIn(a||t||"value")},or=function(e,r){if((0,l.isArr)(r)){var t=[];return r.forEach(function(n){(0,l.isStr)(n)?t.push(re(e,n)):(0,l.isPlainObj)(n)&&n.name&&n.source&&(t[n.name]=re(e,n.source,n.property))}),t}else if((0,l.isPlainObj)(r))return(0,l.reduce)(r,function(n,i,a){return n[a]=re(e,i),n},{});return[]},Ne=function(e,r){r===void 0&&(r=!1);var t=e||{},n=t.request,i=t.target,a=t.runner,o=t.field,c=t.scope;n&&(i?(n.state&&o.form.setFieldState(i,function(f){return we(f,n.state,(0,l.lazyMerge)(c,{$target:f}))}),n.schema&&o.form.setFieldState(i,function(f){return je(f,n.schema,(0,l.lazyMerge)(c,{$target:f}),r)}),(0,l.isStr)(a)&&a&&o.form.setFieldState(i,function(f){_("{{function(){".concat(a,"}}}"),(0,l.lazyMerge)(c,{$target:f}))()})):(n.state&&o.setState(function(f){return we(f,n.state,c)}),n.schema&&o.setState(function(f){return je(f,n.schema,c,r)}),(0,l.isStr)(a)&&a&&_("{{function(){".concat(a,"}}}"),c)()))},Ae=function(e,r){r===void 0&&(r={});var t=function(d,s){return b.autorun.memo(function(){return(0,b.observable)(d)},s)},n=function(d){return e.setComponentProps(d)},i=b.autorun.effect,a=b.autorun.memo,o=e,c=e.form,f=e.form.values;return(0,l.lazyMerge)({get $lookup(){var d,s;return(s=(d=r==null?void 0:r.scope)===null||d===void 0?void 0:d.$record)!==null&&s!==void 0?s:f},get $records(){return e.records},get $record(){var d=e.record;return typeof d=="object"?(0,l.lazyMerge)(d,{get $lookup(){var s,m;return(m=(s=r==null?void 0:r.scope)===null||s===void 0?void 0:s.$record)!==null&&m!==void 0?m:f},get $index(){return e.index}}):d},get $index(){return e.index}},r.scope,{$form:c,$self:o,$observable:t,$effect:i,$memo:a,$props:n,$values:f})},ur=function(e,r){return function(t){Ne({field:t,request:{schema:e},scope:Ae(t,r)},!0)}},lr=function(e,r){var t=(0,l.toArr)(e["x-reactions"]);return t.map(function(n){return function(i){var a=Ae(i,r),o=_(n,a);if(o){if((0,l.isFn)(o))return o(i,a);var c=o.when,f=o.fulfill,d=o.otherwise,s=o.target,m=o.effects,v=function(){var p=or(i,o.dependencies),S=p,j=(0,l.lazyMerge)(a,{$target:null,$deps:p,$dependencies:S}),R=_(c,j),y=c?R:!0,h=y?f:d,x=y?f==null?void 0:f.run:d==null?void 0:d.run;Ne({field:i,target:s,request:h,runner:x,scope:j})};s&&(o.effects=m!=null&&m.length?m:ar),o.effects?b.autorun.memo(function(){(0,b.untracked)(function(){(0,l.each)(o.effects,function(p){_e[p]&&_e[p](i.address,v)})})},[]):v()}}})},cr=function(e,r){return{name:e.name,reactions:[ur(e,r)].concat(lr(e,r))}},ne=function(){return ne=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ne.apply(this,arguments)},Ve=[],B={},fr=function(e){return Ve.reduce(function(r,t){return t(r)},ne({},e))},Ie=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach(function(t){(0,l.isFn)(t)&&Ve.push(t)})},$e=function(e,r){e&&(0,l.isFn)(r)&&(B[e]=B[e]||[],B[e].push(r))},dr=function(e){(0,l.isArr)(e)&&e.forEach(function(r){(0,l.isArr)(B[r])&&B[r].forEach(function(t){Ie(t)})})},G=function(){return G=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},G.apply(this,arguments)},sr=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a},vr=function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},te=["card","block","grid-col","grid-row","grid","layout","step","tab","text-box"],ie={},ae=function(e){if((0,l.isStr)(e))return e.replace(/\$value/,"$self.value")},mr=function(e){return(0,l.isArr)(e)?e.reduce(function(r,t){if(!t)return r;if(t.type==="value:visible")return r.concat({target:t.target,when:ae(t.condition),fulfill:{state:{visible:!0}},otherwise:{state:{visible:!1}}});if(t.type==="value:schema")return r.concat({target:t.target,when:ae(t.condition),fulfill:{schema:oe(G({version:"1.0"},t.schema))},otherwise:{schema:oe(G({version:"1.0"},t.otherwise))}});if(t.type==="value:state")return r.concat({target:t.target,when:ae(t.condition),fulfill:{state:t.state},otherwise:{state:t.otherwise}})},[]):[]},oe=function(e){return(0,l.isValid)(e.editable)&&(e["x-editable"]=e["x-editable"]||e.editable,delete e.editable),(0,l.isValid)(e.visible)&&(e["x-visible"]=e["x-visible"]||e.visible,delete e.visible),(0,l.isValid)(e.display)&&(e["x-display"]=e["x-display"]||(e.display?"visible":"hidden"),delete e.display),(0,l.isValid)(e["x-props"])&&(e["x-decorator-props"]=e["x-decorator-props"]||e["x-props"],delete e.display),e["x-linkages"]&&(e["x-reactions"]=(0,l.toArr)(e["x-reactions"]).concat(mr(e["x-linkages"])),delete e["x-linkages"]),e["x-component"]?te.some(function(r){return(0,l.lowerCase)(r)===(0,l.lowerCase)(e["x-component"])})&&(e.type="void"):ie[e.type]&&(e["x-component"]=ie[e.type]),!e["x-decorator"]&&e.type!=="void"&&e.type!=="object"&&(e["x-decorator"]=e["x-decorator"]||"FormItem"),e["x-rules"]&&(e["x-validator"]=[].concat(e["x-validator"]||[]).concat(e["x-rules"])),e};$e("1.0",oe);var pr=function(e){te.push.apply(te,vr([],sr(e),!1))},yr=function(e){Object.assign(ie,e)},V=function(){function e(r,t){var n=this;return this._isJSONSchemaObject=!0,this.version="2.0",this.addProperty=function(i,a){return n.properties=n.properties||{},n.properties[i]=new e(a,n),n.properties[i].name=i,n.properties[i]},this.removeProperty=function(i){var a=n.properties[i];return delete n.properties[i],a},this.setProperties=function(i){for(var a in i)n.addProperty(a,i[a]);return n},this.addPatternProperty=function(i,a){if(a)return n.patternProperties=n.patternProperties||{},n.patternProperties[i]=new e(a,n),n.patternProperties[i].name=i,n.patternProperties[i]},this.removePatternProperty=function(i){var a=n.patternProperties[i];return delete n.patternProperties[i],a},this.setPatternProperties=function(i){if(!i)return n;for(var a in i)n.addPatternProperty(a,i[a]);return n},this.setAdditionalProperties=function(i){if(i)return n.additionalProperties=new e(i),n.additionalProperties},this.setItems=function(i){if(i)return Array.isArray(i)?n.items=i.map(function(a){return new e(a,n)}):n.items=new e(i,n),n.items},this.setAdditionalItems=function(i){if(i)return n.additionalItems=new e(i,n),n.additionalItems},this.findDefinitions=function(i){if(!(!i||!n.root||!(0,l.isStr)(i))&&i.indexOf("#/")===0)return l.FormPath.getIn(n.root,i.substring(2).split("/"))},this.mapProperties=function(i){return e.getOrderProperties(n).map(function(a,o){var c=a.schema,f=a.key;return i(c,f,o)})},this.mapPatternProperties=function(i){return e.getOrderProperties(n,"patternProperties").map(function(a,o){var c=a.schema,f=a.key;return i(c,f,o)})},this.reduceProperties=function(i,a){var o=a;return e.getOrderProperties(n,"properties").forEach(function(c,f){var d=c.schema,s=c.key;o=i(o,d,s,f)}),o},this.reducePatternProperties=function(i,a){var o=a;return e.getOrderProperties(n,"patternProperties").forEach(function(c,f){var d=c.schema,s=c.key;o=i(o,d,s,f)}),o},this.compile=function(i){var a=new e({},n.parent);return(0,l.each)(n,function(o,c){(0,l.isFn)(o)&&!c.includes("x-")||c==="parent"||c==="root"||(Se[c]?a[c]=o&&_(o,i):a[c]=o&&Y(o,i))}),a},this.fromJSON=function(i){return i?e.isSchemaInstance(i)?i:((0,l.each)(fr(i),function(a,o){(0,l.isFn)(a)&&!o.includes("x-")||(o==="properties"?n.setProperties(a):o==="patternProperties"?n.setPatternProperties(a):o==="additionalProperties"?n.setAdditionalProperties(a):o==="items"?n.setItems(a):o==="additionalItems"?n.setAdditionalItems(a):o==="$ref"?n.fromJSON(n.findDefinitions(a)):n[o]=a)}),n):n},this.toJSON=function(i){i===void 0&&(i=!0);var a={};return(0,l.each)(n,function(o,c){var f,d;if(!((0,l.isFn)(o)&&!c.includes("x-")||c==="parent"||c==="root"))if(c==="properties"||c==="patternProperties"){if(!i)return;a[c]=(0,l.map)(o,function(s){var m;return(m=s==null?void 0:s.toJSON)===null||m===void 0?void 0:m.call(s)})}else if(c==="additionalProperties"||c==="additionalItems"){if(!i)return;a[c]=(f=o==null?void 0:o.toJSON)===null||f===void 0?void 0:f.call(o)}else if(c==="items"){if(!i)return;Array.isArray(o)?a[c]=o.map(function(s){var m;return(m=s==null?void 0:s.toJSON)===null||m===void 0?void 0:m.call(s)}):a[c]=(d=o==null?void 0:o.toJSON)===null||d===void 0?void 0:d.call(o)}else a[c]=o}),a},this.toFieldProps=function(i){return cr(n,i)},t?(this.parent=t,this.root=t.root):this.root=this,this.fromJSON(r)}return e.getOrderProperties=function(r,t){r===void 0&&(r={}),t===void 0&&(t="properties");var n=[],i=[];for(var a in r[t]){var o=r[t][a],c=o["x-index"];isNaN(c)?i.push({schema:o,key:a}):n[c]={schema:o,key:a}}return n.concat(i).filter(function(f){return!!f})},e.compile=function(r,t){return Y(r,t)},e.shallowCompile=function(r,t){return _(r,t)},e.isSchemaInstance=function(r){return(0,l.instOf)(r,e)},e.registerCompiler=tr,e.registerPatches=Ie,e.registerVoidComponents=pr,e.registerTypeDefaultComponents=yr,e.registerPolyfills=$e,e.enablePolyfills=dr,e.silent=nr,e}(),u=F(67294),hr=F(8679),Me=F.n(hr),Te=typeof document!="undefined"?u.useLayoutEffect:u.useEffect;function gr(){try{if(typeof self!="undefined")return self}catch(e){}try{if(typeof window!="undefined")return window}catch(e){}try{if(typeof F.g!="undefined")return F.g}catch(e){}return Function("return this")()}var De=gr(),Q=De.FinalizationRegistry&&new De.FinalizationRegistry(function(e){var r;return(r=e==null?void 0:e.clean)===null||r===void 0?void 0:r.call(e)}),Pr=function(){function e(r,t){t===void 0&&(t=1e4),this.token={clean:r},this.expireTime=t}return e.prototype.open=function(r){var t=this;Q?Q.register(r,this.token,this.token):this.request=setTimeout(function(){var n,i;(i=(n=t.token)===null||n===void 0?void 0:n.clean)===null||i===void 0||i.call(n)},this.expireTime)},e.prototype.close=function(){Q?Q.unregister(this.token):clearTimeout(this.request)},e}(),Be=function(e){var r=!1;return Promise.resolve(0).then(function(){if(r){r=!1;return}e()}),function(){r=!0}},Fr=function(e){var r=(0,u.useRef)(null);r.current=Be(e),Te(function(){r.current(),e()})},br=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a},ue=[],U={value:0},le=new Set;function Or(){var e=br((0,u.useState)([]),2),r=e[1],t=(0,u.useRef)(!1),n=(0,u.useRef)(!1);Te(function(){return t.current=!0,n.current&&(r([]),n.current=!1),function(){t.current=!1}},ue);var i=(0,u.useCallback)(function(){r([])},ue),a=(0,u.useCallback)(function(){if(!t.current){n.current=!0;return}U.value===0?i():le.add(i)},ue);return U.value++,Fr(function(){U.value>0&&U.value--,U.value===0&&le.forEach(function(o){le.delete(o),o()})}),a}var Ue=Array.isArray,xr=function(e,r){var t=Ue(e),n=Ue(r);return t!==n?!1:t?e.length!==r.length?!1:e.every(function(i,a){return i===r[a]}):e===r},Je=function(e,r){var t=(0,u.useRef)(null),n=(0,u.useRef)(!1);(0,u.useEffect)(function(){n.current=!0;var i=e();return function(){if(n.current=!1,!xr(t.current,r)){i&&i();return}Be(function(){n.current||i&&i()})}},r),t.current=r},Sr=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a},Er=function(){function e(){}return e}();function Cr(){return new Er}var ze=function(e){var r=u.useRef(null),t=u.useRef(),n=Sr(u.useState(Cr),1),i=n[0];return r.current||(r.current=e()),t.current||(t.current=new Pr(function(){r.current&&r.current.dispose()}),t.current.open(i)),Je(function(){return t.current.close(),function(){r.current&&(r.current.dispose(),r.current=null)}},[]),r.current},Le=function(e,r){var t=Or(),n=ze(function(){return new b.Tracker(function(){typeof(r==null?void 0:r.scheduler)=="function"?r.scheduler(t):t()},r==null?void 0:r.displayName)});return n.track(e)},J=function(){return J=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},J.apply(this,arguments)};function I(e,r){var t=J({forwardRef:!1},r),n=t.forwardRef?(0,u.forwardRef)(function(a,o){return Le(function(){return e(J(J({},a),{ref:o}))},t)}):function(a){return Le(function(){return e(a)},t)},i=(0,u.memo)(n);return Me()(i,e),t.displayName&&(i.displayName=t.displayName),i}var Rr=I(function(e){var r=typeof e.children=="function"?e.children():e.children;return u.createElement(u.Fragment,{},r)}),qr=null,wr=Je,jr=ze,Hr=null,Zr=null,kr=null,z=function(e){return wr(function(){return e.onMount(),function(){return e.onUnmount()}},[e]),e},_r=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){var n=t.children;return e.reduce(function(i,a){return u.createElement(a.Provider,{value:void 0},i)},n)}},ce=(0,u.createContext)(null),N=(0,u.createContext)(null),$=(0,u.createContext)(null),W=(0,u.createContext)(null),L=(0,u.createContext)(null),X=(0,u.createContext)(null),fe=(0,u.createContext)(null),Ke=_r(N,$,W,L,X,fe),w=function(){return(0,u.useContext)(ce)},C=function(){return(0,u.useContext)(N)},Nr=function(){var e=C(),r=w(),t=function(n){return n?(0,g.isObjectField)(n)?n:t(n==null?void 0:n.parent):r};return t(e)},Ar=function(){return(0,u.useContext)(W)},Vr=function(e){var r=w();jr(function(){var t=(0,l.uid)();return r.addEffects(t,e),{dispose:function(){r.removeEffects(t)}}})},de=function(){return(0,u.useContext)(L)},A=function(){return A=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},A.apply(this,arguments)};function Ir(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return I(function(n){var i=C(),a=e.reduce(function(o,c){return(0,l.isFn)(c)?o=Object.assign(o,c(o,i)):(0,l.each)(c,function(f,d){var s=l.FormPath.getIn(i,d),m=(0,l.isStr)(f)?f:d,v=l.FormPath.getIn(o,m);d==="value"&&f!==d&&delete o.value,!((0,l.isValid)(v)&&!(0,l.isValid)(s))&&l.FormPath.setIn(o,m,s)}),o},A({},n));return u.createElement(t,a)},{forwardRef:!0})}}function $r(e,r){return function(t){return I(function(n){var i=C();return!(0,g.isVoidField)(i)&&(i==null?void 0:i.pattern)==="readPretty"?u.createElement(e,A(A({},r),n)):u.createElement(t,n)},{forwardRef:!0})}}function Mr(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var n=r.reduce(function(a,o){return o(a)},e),i=u.forwardRef(function(a,o){return u.createElement(n,A(A({},a),{ref:o}))});return e&&Me()(i,e),i}var Ye=function(e){var r=z(e.form);return u.createElement(Ke,null,u.createElement(ce.Provider,{value:r},e.children))};Ye.displayName="FormProvider";var Ge=I(function(e){var r=(0,l.isFn)(e.children)?e.children(w()):null;return u.createElement(u.Fragment,null,r)});Ge.displayName="FormConsumer";var q=function(){return q=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},q.apply(this,arguments)},M=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a},T=function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Tr=function(e,r){if(!(!e&&!r)&&!(0,l.isFn)(e))return u.createElement(u.Fragment,null,e,r)},Dr=function(e){return e&&(typeof e=="object"||typeof e=="function")},Qe=function(e,r,t){return(0,l.isFn)(e)?e(r,t):e},We=function(e){var r,t=(0,u.useContext)(X);if(!e.field)return u.createElement(u.Fragment,null,Qe(e.children));var n=e.field,i=Tr(Qe(e.children,n,n.form),(r=n.content)!==null&&r!==void 0?r:n.componentProps.children);if(n.display!=="visible")return null;var a=function(f){var d;return Dr(f)?f:(d=l.FormPath.getIn(t,f))!==null&&d!==void 0?d:f},o=function(f){return n.decoratorType?u.createElement(a(n.decoratorType),(0,b.toJS)(n.decoratorProps),f):u.createElement(u.Fragment,null,f)},c=function(){var f,d,s;if(!n.componentType)return i;var m=(0,g.isVoidField)(n)?void 0:n.value,v=(0,g.isVoidField)(n)?(f=n.componentProps)===null||f===void 0?void 0:f.onChange:function(){for(var y,h,x=[],P=0;P<arguments.length;P++)x[P]=arguments[P];n.onInput.apply(n,T([],M(x),!1)),(h=(y=n.componentProps)===null||y===void 0?void 0:y.onChange)===null||h===void 0||h.call.apply(h,T([y],M(x),!1))},p=(0,g.isVoidField)(n)?(d=n.componentProps)===null||d===void 0?void 0:d.onFocus:function(){for(var y,h,x=[],P=0;P<arguments.length;P++)x[P]=arguments[P];n.onFocus.apply(n,T([],M(x),!1)),(h=(y=n.componentProps)===null||y===void 0?void 0:y.onFocus)===null||h===void 0||h.call.apply(h,T([y],M(x),!1))},S=(0,g.isVoidField)(n)?(s=n.componentProps)===null||s===void 0?void 0:s.onBlur:function(){for(var y,h,x=[],P=0;P<arguments.length;P++)x[P]=arguments[P];n.onBlur.apply(n,T([],M(x),!1)),(h=(y=n.componentProps)===null||y===void 0?void 0:y.onBlur)===null||h===void 0||h.call.apply(h,T([y],M(x),!1))},j=(0,g.isVoidField)(n)?void 0:n.pattern==="disabled"||n.pattern==="readPretty",R=(0,g.isVoidField)(n)?void 0:n.pattern==="readOnly";return u.createElement(a(n.componentType),q(q({disabled:j,readOnly:R},(0,b.toJS)(n.componentProps)),{value:m,onChange:v,onFocus:p,onBlur:S}),i)};return o(c())};We.displayName="ReactiveField";var H=I(We,{forwardRef:!0}),se=function(){return se=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},se.apply(this,arguments)},ve=function(e){var r=w(),t=C(),n=z(r.createArrayField(se({basePath:t==null?void 0:t.address},e)));return u.createElement(N.Provider,{value:n},u.createElement(H,{field:n},e.children))};ve.displayName="ArrayField";var me=function(){return me=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},me.apply(this,arguments)},pe=function(e){var r=w(),t=C(),n=z(r.createObjectField(me({basePath:t==null?void 0:t.address},e)));return u.createElement(N.Provider,{value:n},u.createElement(H,{field:n},e.children))};pe.displayName="ObjectField";var ye=function(){return ye=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ye.apply(this,arguments)},he=function(e){var r=w(),t=C(),n=z(r.createVoidField(ye({basePath:t==null?void 0:t.address},e)));return u.createElement(N.Provider,{value:n},u.createElement(H,{field:n},e.children))};he.displayName="VoidField";var ge=function(){return ge=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ge.apply(this,arguments)},Pe=function(e){var r=w(),t=C(),n=z(r.createField(ge({basePath:t==null?void 0:t.address},e)));return u.createElement(N.Provider,{value:n},u.createElement(H,{field:n},e.children))};Pe.displayName="Field";var D=function(){return D=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},D.apply(this,arguments)},Br=function(e){var r=de();return e.toFieldProps({scope:r})},Ur=function(e){var r=C();return e.onlyRenderProperties?e.basePath||(r==null?void 0:r.address.concat(e.name)):e.basePath||(r==null?void 0:r.address)},Fe=function(e){var r=Ur(e),t=(0,u.useMemo)(function(){return new V(e.schema)},[e.schema]),n=Br(t),i=function(o){if(!e.onlyRenderSelf){var c=V.getOrderProperties(t);if(c.length)return u.createElement(u.Fragment,null,c.map(function(f,d){var s=f.schema,m=f.key,v=(o==null?void 0:o.address)||r,p=s;if((0,l.isFn)(e.mapProperties)){var S=e.mapProperties(s,m);S&&(p=S)}return(0,l.isFn)(e.filterProperties)&&e.filterProperties(p,m)===!1?null:u.createElement(Fe,{schema:p,key:"".concat(d,"-").concat(m),name:m,basePath:v})}))}},a=function(){return(0,l.isValid)(e.name)?t.type==="object"?e.onlyRenderProperties?i():u.createElement(pe,D({},n,{name:e.name,basePath:r}),i):t.type==="array"?u.createElement(ve,D({},n,{name:e.name,basePath:r})):t.type==="void"?e.onlyRenderProperties?i():u.createElement(he,D({},n,{name:e.name,basePath:r}),i):u.createElement(Pe,D({},n,{name:e.name,basePath:r})):i()};return t?u.createElement(W.Provider,{value:t},a()):u.createElement(u.Fragment,null)},Z=function(e){var r=(0,u.useContext)(L);return u.createElement(L.Provider,{value:(0,l.lazyMerge)(r,e.value)},e.children)},Jr=function(e){return u.createElement(Z,{value:{get $records(){var r,t;return(t=(r=e.getRecords)===null||r===void 0?void 0:r.call(e))!==null&&t!==void 0?t:[]}}},e.children)},zr=function(e){var r=de();return u.createElement(Z,{value:{get $lookup(){return r==null?void 0:r.$record},get $record(){var t,n=(t=e.getRecord)===null||t===void 0?void 0:t.call(e);return typeof n=="object"?(0,l.lazyMerge)(n,{get $lookup(){return r==null?void 0:r.$record},get $index(){var i;return(i=e.getIndex)===null||i===void 0?void 0:i.call(e)}}):n},get $index(){var t;return(t=e.getIndex)===null||t===void 0?void 0:t.call(e)}}},e.children)},k,be,Oe,E={portalDOM:(be=(k=l.globalThisPolyfill===null||l.globalThisPolyfill===void 0?void 0:l.globalThisPolyfill.document)===null||k===void 0?void 0:k.createElement)===null||be===void 0?void 0:be.call(k,"div"),createPortal:(Oe=l.globalThisPolyfill===null||l.globalThisPolyfill===void 0?void 0:l.globalThisPolyfill.ReactDOM)===null||Oe===void 0?void 0:Oe.createPortal},Lr=function(){var e,r;if(!E.createPortal)try{(e=E.createPortal)!==null&&e!==void 0||(E.createPortal=(r=F(73935))===null||r===void 0?void 0:r.createPortal)}catch(t){}if(!E.createPortal)try{Promise.resolve().then(F.t.bind(F,73935,19)).then(function(t){var n;return(n=E.createPortal)!==null&&n!==void 0?n:E.createPortal=t==null?void 0:t.createPortal}).catch()}catch(t){}},Kr=function(e){var r;return((r=l.globalThisPolyfill.navigator)===null||r===void 0?void 0:r.product)==="ReactNative"?null:E.portalDOM&&E.createPortal?E.createPortal(e,E.portalDOM):u.createElement("template",{},e)};Lr();var O=function(){return O=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},O.apply(this,arguments)},Xe={nonameId:0},Yr=function(){return"NO_NAME_FIELD_$".concat(Xe.nonameId++)};function Gr(e){e===void 0&&(e={});function r(v){var p=V.isSchemaInstance(v.schema)?v.schema:new V(O({type:"object"},v.schema)),S=function(){return Xe.nonameId=0,v.schema?null:Kr(u.createElement($.Provider,{value:p},v.children))},j=function(){return u.createElement(Fe,O({},v,{schema:p}))};return u.createElement(fe.Provider,{value:e},u.createElement(X.Provider,{value:(0,l.lazyMerge)(e.components,v.components)},u.createElement(Z,{value:(0,l.lazyMerge)(e.scope,v.scope)},S(),j())))}r.displayName="SchemaField";function t(v){var p=(0,u.useContext)($);if(!p)return u.createElement(u.Fragment,null);var S=function(){return u.createElement(u.Fragment,null,v.children)},j=function(y){var h=p.items;return h&&h.name!==v.name?p.addProperty(v.name,y):p.setItems(y)};if(p.type==="object"||p.type==="void"){var R=p.addProperty(v.name,v);return u.createElement($.Provider,{value:R},S())}else if(p.type==="array"){var R=j(v);return u.createElement($.Provider,{value:Array.isArray(R)?R[0]:R},v.children)}else return S()}function n(v){return u.createElement(t,O({},v,{name:v.name||Yr()}))}n.displayName="MarkupField";function i(v){return u.createElement(n,O({},v,{type:"string"}))}i.displayName="StringField";function a(v){return u.createElement(n,O({},v,{type:"object"}))}a.displayName="ObjectField";function o(v){return u.createElement(n,O({},v,{type:"array"}))}o.displayName="ArrayField";function c(v){return u.createElement(n,O({},v,{type:"boolean"}))}c.displayName="BooleanField";function f(v){return u.createElement(n,O({},v,{type:"number"}))}f.displayName="NumberField";function d(v){return u.createElement(n,O({},v,{type:"date"}))}d.displayName="DateField";function s(v){return u.createElement(n,O({},v,{type:"datetime"}))}s.displayName="DateTimeField";function m(v){return u.createElement(n,O({},v,{type:"void"}))}return m.displayName="VoidField",r.Markup=n,r.String=i,r.Object=a,r.Array=o,r.Boolean=c,r.Date=d,r.DateTime=s,r.Void=m,r.Number=f,r}}}]);
