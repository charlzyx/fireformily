"use strict";(self.webpackChunkfireformily=self.webpackChunkfireformily||[]).push([[217,633],{95939:function(k,h,r){r.r(h),r.d(h,{QueryListAll:function(){return F},default:function(){return Z}});var i=r(55668),D=r(99619),I=r(27420),w=r(37569),C=r(37029),a=r(53419),E=r(67294),M=r(27484),u=r.n(M),q=r(33852),_=r(70660),s=r(50434),n=function(e,t){console.log("LABEL:",e);try{console.group(JSON.parse(JSON.stringify(t)))}catch(p){console.log("stringify error, origin: ",t)}console.groupEnd()},W=function(e){var t=e.params,p=e.pagination,f=e.sorter,B=e.filters,G=e.extra;n("search sevice args ",{params:t,pagination:p,sorter:f,filters:B,extra:G});var c=t||{},Q=c.start,H=Q===void 0?u()().toDate():Q,T=c.end,R=T===void 0?u()().add(1,"year").toDate():T,g=c.classify,b=c.status,S=c.domain,A=p||{},j=A.current,m=A.pageSize;return Promise.resolve().then(function(){return new Promise(function(X){setTimeout(function(){var d=45,L=Array.from({length:j*m>d?d%m:m}).map(function(ee,K){return{id:j*m+K,status:b!=null?b:+s.We.random.numeric(1)%5,domain:"".concat(S?"".concat(S,"."):"").concat(s.We.internet.domainName()),subdomains:Array.from(new Set(Array.from({length:Math.floor(Math.random()*3)}).map(function(){return s.We.internet.domainName()}))).map(function(U){return{owner:s.We.company.name(),domain:U}}),classify:g!=null?g:Array.from(new Set(Array.from({length:Math.floor(Math.random()*3)}).map(function(){return+s.We.random.numeric(1)%5}))),date:u()(s.We.date.between(H,R)).format("YYYY-MM-DD"),img:s.We.image.avatar(),desc:s.We.lorem.paragraph()}});n("search response ",{list:L,total:d}),X({list:L,total:d})},456)})})},$=function(e,t,p,f){return n("on sort args ",{oldIndex:e,neoIndex:t,array:p,scope:f}),Promise.resolve()},N={batch:{load:function(e){return n("batch load args",e),Promise.resolve(e.$record)},cancel:function(e){n("batch cancel args",e)},submit:function(e,t){return n("batch submit args",{data:e,scope:t}),Promise.resolve()}},add:{load:function(e){return n("add load args",e),Promise.resolve(e.$record)},cancel:function(e){n("add cancel args",e)},submit:function(e,t){return n("add submit args",{data:e,scope:t}),Promise.resolve()}},update:{load:function(e){return n("update load args",e),Promise.resolve(e.$record)},cancel:function(e){n("update cancel args",e)},submit:function(e,t){return n("update submit args",{data:e,scope:t}),Promise.resolve()}},remove:{load:function(e){return n("remove load args",e),Promise.resolve(e.$record)},cancel:function(e){n("remove cancel args",e)},submit:function(e,t){return n("remove submit args",{data:e,scope:t}),Promise.resolve()}}},x={bool:function(){(0,a.registerDictLoader)("bool",function(e){return Promise.resolve([{label:"\u662F",value:1,color:"success"},{label:"\u5426",value:0,color:"error"}]).then(function(t){return e(t)})})},status:function(){(0,a.registerDictLoader)("status",function(e){return Promise.resolve([{label:"\u5DF2\u4E0A\u7EBF",value:0,color:"success"},{label:"\u8FD0\u884C\u4E2D",value:1,color:"processing"},{label:"\u5173\u95ED",value:2,color:"default"},{label:"\u5DF2\u5B95\u673A",value:3,color:"error"},{label:"\u5DF2\u8D85\u8F7D",value:4,color:"warning"}]).then(function(t){return e(t)})})},classify:function(){(0,a.registerDictLoader)("classify",function(e){return Promise.resolve([{label:"\u6587\u827A",value:0},{label:"\u559C\u5267",value:1},{label:"\u7231\u60C5",value:2},{label:"\u52A8\u753B",value:3},{label:"\u60AC\u7591",value:4},{label:"\u79D1\u5E7B",value:5}]).then(function(t){return e(t)})})}},l=r(85893),y,v,O=(0,I.createSchemaField)({components:{QueryList:a.QueryList,QueryForm:a.QueryForm,FormItem:i.xJ,Input:i.II,Select:i.Ph,FormGrid:i.T5,FormLayout:i.lt,DatePicker:i.Mt,Editable:i.CX,QueryTable:a.QueryTable,ArrayTable:i.hf,PopActions:a.PopActions,ImageView:a.ImageView,Dict:a.Dict,LongText:a.LongText,Space:i.T},scope:{service:W,onSort:$,actions:N}});x.bool(),x.status(),x.classify();var P=function(){return{properties:{domain:{title:"\u57DF\u540D",type:"string",required:!0,"x-decorator":"FormItem","x-component":"Input"},classify:{title:"\u5206\u7C7B",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-data":{dict:"classify"}},status:{title:"\u72B6\u6001",type:"string","x-decorator":"FormItem","x-component":"Select","x-data":{dict:"status"}},date:{title:"\u4E0A\u7EBF\u65F6\u95F4",type:"string","x-decorator":"FormItem","x-component":"DatePicker"}}}},z={type:"object","x-component":"QueryForm","x-decorator":"FormLayout","x-decorator-props":{layout:"vertical"},properties:{domain:{title:"\u57DF\u540D",type:"string","x-decorator":"FormItem","x-component":"Input"},classify:{title:"\u5206\u7C7B",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-data":{dict:"classify"}},status:{title:"\u72B6\u6001",type:"string","x-decorator":"FormItem","x-component":"Select","x-data":{dict:"status"}},"[start, end]":{title:"\u65E5\u671F\u533A\u95F4",type:"string","x-decorator":"FormItem","x-decorator-props":{gridSpan:2},"x-component":"DatePicker.RangePicker"}}},Y={title:"\u67E5\u8BE2\u5217\u8868",type:"void","x-component":"QueryTable.Titlebar",properties:{selection:{type:"void","x-component":"QueryTable.Selection",properties:{batchExp:{type:"object",title:"\u6279\u91CF\u5BFC\u51FA","x-component":"PopActions.Popover","x-component-props":{actions:"{{actions.batch}}"}},batchDelete:{type:"object",title:"\u6279\u91CF\u5220\u9664","x-component":"PopActions.Popconfirm","x-component-props":{actions:"{{actions.batch}}"}}}},popover:{title:"\u65B0\u589E",type:"object","x-content":"Popover content","x-component":"PopActions","x-component-props":{actions:"{{actions.add}}",type:"primary"},properties:(y=P())===null||y===void 0?void 0:y.properties}}},J={type:"array","x-decorator":"FormItem","x-component":"QueryTable","x-component-props":{scroll:{x:"100%"},onSort:"{{onSort}}",expandable:{rowExpandable:function(e){return e.subdomains.length>0}}},items:{type:"object",properties:{sort:{type:"void","x-component":"QueryTable.Column","x-component-props":{width:80,title:"\u6392\u5E8F",align:"center"},properties:{sort:{type:"void","x-component":"QueryTable.SortHandle"}}},index:{type:"void","x-component":"QueryTable.Column","x-component-props":{width:80,title:"\u5E8F\u53F7",align:"center"},properties:{index:{type:"void","x-component":"QueryTable.Index"}}},id:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"ID",sorter:function(e,t){return e.id-t.id}},properties:{id:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Input"}}},status:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u72B6\u6001"},properties:{status:{type:"string","x-read-pretty":!0,"x-data":{dict:"status"},"x-decorator":"FormItem","x-component":"Select","x-component-props":{type:"badge"}}}},domain:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u57DF\u540D",filters:`{{$records ? $records.reduce((list, record) => {
              if (list.find(x => record.domain.includes(x.value))) return list;
              const parts = record.domain.split('.');
              list.push({ text: '.'+parts[parts.length - 1],  value: '.'+parts[parts.length - 1] });
              return list;
            }, []): []}}`,onFilter:function(e,t){return t.domain.includes(e)}},properties:{domain:{type:"string","x-decorator":"FormItem","x-component":"LongText"}}},classify:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u7C7B\u578B\u6807\u7B7E"},properties:{classify:{type:"array","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{type:"tag",mode:"multiple"},"x-data":{dict:"classify"}}}},img:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u56FE\u7247"},properties:{img:{type:"string","x-decorator":"FormItem","x-component":"ImageView"}}},date:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u4E0A\u7EBF\u65F6\u95F4"},properties:{date:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"DatePicker"}}},operations:{type:"void","x-component":"QueryTable.Operations","x-component-props":{title:"\u64CD\u4F5C",width:"240px",fixed:"right"},properties:{popconfirm:{title:"\u5220\u9664",type:"object","x-content":"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E00\u6761\u8BB0\u5F55\u5417?","x-component":"PopActions.Popconfirm","x-component-props":{actions:"{{actions.remove}}"},properties:{}},drawer:{title:"\u7F16\u8F91",type:"object","x-content":"Drawer content","x-component":"PopActions.Drawer","x-component-props":{actions:"{{actions.update}}"},properties:(v=P())===null||v===void 0?void 0:v.properties}}}}},properties:{expandable:{type:"void","x-component":"QueryTable.Expandable",properties:{subdomains:{type:"void","x-component":"QueryList",properties:{titlebar:{type:"void",title:"\u4E8C\u7EA7\u57DF\u540D","x-component":"QueryTable.Titlebar",properties:{add:{title:"\u65B0\u589E",type:"object","x-content":"Modal content","x-component":"PopActions","x-component-props":{actions:"{{actions.add}}"},properties:{owner:{title:"Owner",type:"string","x-decorator":"FormItem","x-component":"Input"},domain:{title:"\u57DF\u540D",type:"string","x-decorator":"FormItem","x-component":"Input"}}}}},subdomains:{type:"array","x-component":"QueryTable",items:{type:"object",properties:{owner:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"Owner"},properties:{owner:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Input"}}},domain:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u57DF\u540D"},properties:{domain:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Input"}}},operations:{type:"void","x-component":"QueryTable.Operations","x-component-props":{title:"\u64CD\u4F5C",width:"200px"},properties:{popconfirm:{title:"\u5220\u9664",type:"object","x-content":"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E00\u6761\u8BB0\u5F55\u5417?","x-component":"PopActions.Popconfirm","x-component-props":{actions:"{{actions.remove}}"},properties:{}},drawer:{title:"\u7F16\u8F91",type:"object","x-content":"Drawer content","x-component":"PopActions","x-component-props":{actions:"{{actions.update}}"},properties:{owner:{type:"string","x-decorator":"FormItem","x-component":"Input"},domain:{type:"string","x-decorator":"FormItem","x-component":"Input"}}}}}}}}}}}}}},V={type:"object",properties:{querylist:{type:"void","x-component":"QueryList","x-component-props":{size:"small",service:"{{service}}"},properties:{query:z,titlebar:Y,list:J}}}},F=function(){var e=(0,E.useMemo)(function(){return(0,D.Np)({effects:function(p){(0,a.dictEffects)(p)}})},[]);return(0,l.jsx)("div",{style:{padding:"20px"},children:(0,l.jsx)(w.ZP,{locale:C.Z,children:(0,l.jsx)(I.FormProvider,{form:e,children:(0,l.jsx)(O,{schema:V})})})})},Z=F}}]);
