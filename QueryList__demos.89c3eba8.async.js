"use strict";(self.webpackChunkfireformily=self.webpackChunkfireformily||[]).push([[217,633],{98836:function(F,m,e){e.r(m),e.d(m,{QueryListAll:function(){return v}});var n=e(55668),P=e(99619),d=e(27420),b=e(37569),I=e(37029),p=e(53419),_=e(67294),i=e(20365),o=e(85893),u,x,E=(0,d.createSchemaField)({components:{QueryList:p.QueryList,QueryForm:p.QueryForm,FormItem:n.xJ,Input:n.II,Select:n.Ph,FormGrid:n.T5,FormLayout:n.lt,DatePicker:n.Mt,Editable:n.CX,QueryTable:p.QueryTable,ArrayTable:n.hf,PopActions:p.PopActions,ImageView:p.ImageView,Dict:p.Dict,LongText:p.LongText,Space:n.T},scope:{service:i.Xn,onSort:i.cB,actions:i.Nw}});i.Hl.bool(),i.Hl.status(),i.Hl.classify();var f=function(){return{properties:{domain:{title:"\u57DF\u540D",type:"string",required:!0,"x-decorator":"FormItem","x-component":"Input"},classify:{title:"\u5206\u7C7B",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-data":{dict:"classify"}},status:{title:"\u72B6\u6001",type:"string","x-decorator":"FormItem","x-component":"Select","x-data":{dict:"status"}},date:{title:"\u4E0A\u7EBF\u65F6\u95F4",type:"string","x-decorator":"FormItem","x-component":"DatePicker"}}}},a={type:"object","x-component":"QueryForm","x-decorator":"FormLayout","x-decorator-props":{layout:"vertical"},properties:{domain:{title:"\u57DF\u540D",type:"string","x-decorator":"FormItem","x-component":"Input"},classify:{title:"\u5206\u7C7B",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-data":{dict:"classify"}},status:{title:"\u72B6\u6001",type:"string","x-decorator":"FormItem","x-component":"Select","x-data":{dict:"status"}},"[start, end]":{title:"\u65E5\u671F\u533A\u95F4",type:"string","x-decorator":"FormItem","x-decorator-props":{gridSpan:2},"x-component":"DatePicker.RangePicker"}}},t={title:"\u67E5\u8BE2\u5217\u8868",type:"void","x-component":"QueryTable.Titlebar",properties:{selection:{type:"void","x-component":"QueryTable.Selection",properties:{batchExp:{type:"object",title:"\u6279\u91CF\u5BFC\u51FA","x-component":"PopActions.Popover","x-component-props":{actions:"{{actions.batch}}"}},batchDelete:{type:"object",title:"\u6279\u91CF\u5220\u9664","x-component":"PopActions.Popconfirm","x-component-props":{actions:"{{actions.batch}}"}}}},popover:{title:"\u65B0\u589E",type:"object","x-content":"Popover content","x-component":"PopActions","x-component-props":{actions:"{{actions.add}}",type:"primary"},properties:(u=f())===null||u===void 0?void 0:u.properties}}},r={type:"array","x-decorator":"FormItem","x-component":"QueryTable","x-component-props":{scroll:{x:"100%"},onSort:"{{onSort}}",expandable:{rowExpandable:function(c){return c.subdomains.length>0}}},items:{type:"object",properties:{sort:{type:"void","x-component":"QueryTable.Column","x-component-props":{width:80,title:"\u6392\u5E8F",align:"center"},properties:{sort:{type:"void","x-component":"QueryTable.SortHandle"}}},index:{type:"void","x-component":"QueryTable.Column","x-component-props":{width:80,title:"\u5E8F\u53F7",align:"center"},properties:{index:{type:"void","x-component":"QueryTable.Index"}}},id:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"ID",sorter:function(c,s){return c.id-s.id}},properties:{id:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Input"}}},status:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u72B6\u6001"},properties:{status:{type:"string","x-read-pretty":!0,"x-data":{dict:"status"},"x-decorator":"FormItem","x-component":"Select","x-component-props":{type:"badge"}}}},domain:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u57DF\u540D",filters:`{{$records ? $records.reduce((list, record) => {
              if (list.find(x => record.domain.includes(x.value))) return list;
              const parts = record.domain.split('.');
              list.push({ text: '.'+parts[parts.length - 1],  value: '.'+parts[parts.length - 1] });
              return list;
            }, []): []}}`,onFilter:function(c,s){return s.domain.includes(c)}},properties:{domain:{type:"string","x-decorator":"FormItem","x-component":"LongText"}}},classify:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u7C7B\u578B\u6807\u7B7E"},properties:{classify:{type:"array","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{type:"tag",mode:"multiple"},"x-data":{dict:"classify"}}}},img:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u56FE\u7247"},properties:{img:{type:"string","x-decorator":"FormItem","x-component":"ImageView"}}},date:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u4E0A\u7EBF\u65F6\u95F4"},properties:{date:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"DatePicker"}}}}},properties:{actions:{type:"void","x-component":"QueryTable.Actions",title:"\u64CD\u4F5C","x-component-props":{fixed:"right"},properties:{popconfirm:{title:"\u5220\u9664",type:"object","x-content":"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E00\u6761\u8BB0\u5F55\u5417?","x-component":"PopActions.Popconfirm","x-component-props":{actions:"{{actions.remove}}"},properties:{}},drawer:{title:"\u7F16\u8F91",type:"object","x-content":"Drawer content","x-component":"PopActions.Drawer","x-component-props":{actions:"{{actions.update}}"},properties:(x=f())===null||x===void 0?void 0:x.properties}}}}},y={type:"object",properties:{querylist:{type:"void","x-component":"QueryList","x-component-props":{size:"small",service:"{{service}}"},properties:{query:a,titlebar:t,list:r}}}},v=function(){var c=(0,_.useMemo)(function(){return(0,P.Np)({effects:function(g){(0,p.dictEffects)(g)}})},[]);return(0,o.jsx)("div",{style:{padding:"20px"},children:(0,o.jsx)(b.ZP,{locale:I.Z,children:(0,o.jsx)(d.FormProvider,{form:c,children:(0,o.jsx)(E,{schema:y})})})})};m.default=v},16016:function(F,m,e){e.r(m),e.d(m,{QueryListAll:function(){return v}});var n=e(55668),P=e(99619),d=e(27420),b=e(37569),I=e(37029),p=e(53419),_=e(67294),i=e(20365),o=e(85893),u,x,E=(0,d.createSchemaField)({components:{QueryList:p.QueryList,QueryForm:p.QueryForm,FormItem:n.xJ,Input:n.II,Select:n.Ph,FormGrid:n.T5,FormLayout:n.lt,DatePicker:n.Mt,Editable:n.CX,QueryTable:p.QueryTable,ArrayTable:n.hf,PopActions:p.PopActions,ImageView:p.ImageView,Dict:p.Dict,LongText:p.LongText,Space:n.T},scope:{service:i.Xn,onSort:i.cB,actions:i.Nw}});i.Hl.bool(),i.Hl.status(),i.Hl.classify();var f=function(){return{properties:{domain:{title:"\u57DF\u540D",type:"string",required:!0,"x-decorator":"FormItem","x-component":"Input"},classify:{title:"\u5206\u7C7B",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-data":{dict:"classify"}},status:{title:"\u72B6\u6001",type:"string","x-decorator":"FormItem","x-component":"Select","x-data":{dict:"status"}},date:{title:"\u4E0A\u7EBF\u65F6\u95F4",type:"string","x-decorator":"FormItem","x-component":"DatePicker"}}}},a={type:"object","x-component":"QueryForm","x-decorator":"FormLayout","x-decorator-props":{layout:"vertical"},properties:{domain:{title:"\u57DF\u540D",type:"string","x-decorator":"FormItem","x-component":"Input"},classify:{title:"\u5206\u7C7B",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-data":{dict:"classify"}},status:{title:"\u72B6\u6001",type:"string","x-decorator":"FormItem","x-component":"Select","x-data":{dict:"status"}},"[start, end]":{title:"\u65E5\u671F\u533A\u95F4",type:"string","x-decorator":"FormItem","x-decorator-props":{gridSpan:2},"x-component":"DatePicker.RangePicker"}}},t={title:"\u67E5\u8BE2\u5217\u8868",type:"void","x-component":"QueryTable.Titlebar",properties:{selection:{type:"void","x-component":"QueryTable.Selection",properties:{batchExp:{type:"object",title:"\u6279\u91CF\u5BFC\u51FA","x-component":"PopActions.Popover","x-component-props":{actions:"{{actions.batch}}"}},batchDelete:{type:"object",title:"\u6279\u91CF\u5220\u9664","x-component":"PopActions.Popconfirm","x-component-props":{actions:"{{actions.batch}}"}}}},popover:{title:"\u65B0\u589E",type:"object","x-content":"Popover content","x-component":"PopActions","x-component-props":{actions:"{{actions.add}}",type:"primary"},properties:(u=f())===null||u===void 0?void 0:u.properties}}},r={type:"array","x-decorator":"FormItem","x-component":"QueryTable","x-component-props":{scroll:{x:"100%"},onSort:"{{onSort}}",expandable:{rowExpandable:function(c){return c.subdomains.length>0}}},items:{type:"object",properties:{sort:{type:"void","x-component":"QueryTable.Column","x-component-props":{width:80,title:"\u6392\u5E8F",align:"center"},properties:{sort:{type:"void","x-component":"QueryTable.SortHandle"}}},index:{type:"void","x-component":"QueryTable.Column","x-component-props":{width:80,title:"\u5E8F\u53F7",align:"center"},properties:{index:{type:"void","x-component":"QueryTable.Index"}}},id:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"ID",sorter:function(c,s){return c.id-s.id}},properties:{id:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Input"}}},status:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u72B6\u6001"},properties:{status:{type:"string","x-read-pretty":!0,"x-data":{dict:"status"},"x-decorator":"FormItem","x-component":"Select","x-component-props":{type:"badge"}}}},domain:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u57DF\u540D",filters:`{{$records ? $records.reduce((list, record) => {
              if (list.find(x => record.domain.includes(x.value))) return list;
              const parts = record.domain.split('.');
              list.push({ text: '.'+parts[parts.length - 1],  value: '.'+parts[parts.length - 1] });
              return list;
            }, []): []}}`,onFilter:function(c,s){return s.domain.includes(c)}},properties:{domain:{type:"string","x-decorator":"FormItem","x-component":"LongText"}}},classify:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u7C7B\u578B\u6807\u7B7E"},properties:{classify:{type:"array","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{type:"tag",mode:"multiple"},"x-data":{dict:"classify"}}}},img:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u56FE\u7247"},properties:{img:{type:"string","x-decorator":"FormItem","x-component":"ImageView"}}},date:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u4E0A\u7EBF\u65F6\u95F4"},properties:{date:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"DatePicker"}}},operations:{type:"void","x-component":"QueryTable.Operations","x-component-props":{title:"\u64CD\u4F5C",width:"240px",fixed:"right"},properties:{popconfirm:{title:"\u5220\u9664",type:"object","x-content":"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E00\u6761\u8BB0\u5F55\u5417?","x-component":"PopActions.Popconfirm","x-component-props":{actions:"{{actions.remove}}"},properties:{}},drawer:{title:"\u7F16\u8F91",type:"object","x-content":"Drawer content","x-component":"PopActions.Drawer","x-component-props":{actions:"{{actions.update}}"},properties:(x=f())===null||x===void 0?void 0:x.properties}}}}},properties:{expandable:{type:"void","x-component":"QueryTable.Expandable",properties:{subdomains:{type:"void","x-component":"QueryList",properties:{titlebar:{type:"void",title:"\u4E8C\u7EA7\u57DF\u540D","x-component":"QueryTable.Titlebar",properties:{add:{title:"\u65B0\u589E",type:"object","x-content":"Modal content","x-component":"PopActions","x-component-props":{actions:"{{actions.add}}"},properties:{owner:{title:"Owner",type:"string","x-decorator":"FormItem","x-component":"Input"},domain:{title:"\u57DF\u540D",type:"string","x-decorator":"FormItem","x-component":"Input"}}}}},subdomains:{type:"array","x-component":"QueryTable",items:{type:"object",properties:{owner:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"Owner"},properties:{owner:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Input"}}},domain:{type:"void","x-component":"QueryTable.Column","x-component-props":{title:"\u57DF\u540D"},properties:{domain:{type:"string","x-read-pretty":!0,"x-decorator":"FormItem","x-component":"Input"}}},operations:{type:"void","x-component":"QueryTable.Operations","x-component-props":{title:"\u64CD\u4F5C",width:"200px"},properties:{popconfirm:{title:"\u5220\u9664",type:"object","x-content":"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E00\u6761\u8BB0\u5F55\u5417?","x-component":"PopActions.Popconfirm","x-component-props":{actions:"{{actions.remove}}"},properties:{}},drawer:{title:"\u7F16\u8F91",type:"object","x-content":"Drawer content","x-component":"PopActions","x-component-props":{actions:"{{actions.update}}"},properties:{owner:{type:"string","x-decorator":"FormItem","x-component":"Input"},domain:{type:"string","x-decorator":"FormItem","x-component":"Input"}}}}}}}}}}}}}},y={type:"object",properties:{querylist:{type:"void","x-component":"QueryList","x-component-props":{size:"small",service:"{{service}}"},properties:{query:a,titlebar:t,list:r}}}},v=function(){var c=(0,_.useMemo)(function(){return(0,P.Np)({effects:function(g){(0,p.dictEffects)(g)}})},[]);return(0,o.jsx)("div",{style:{padding:"20px"},children:(0,o.jsx)(b.ZP,{locale:I.Z,children:(0,o.jsx)(d.FormProvider,{form:c,children:(0,o.jsx)(E,{schema:y})})})})};m.default=v},20365:function(F,m,e){e.d(m,{Hl:function(){return f},Nw:function(){return E},Xn:function(){return u},cB:function(){return x}});var n=e(53419),P=e(27484),d=e.n(P),b=e(33852),I=e.n(b),p=e(70660),_=e.n(p),i=e(50434),o=function(t,r){console.log("LABEL:",t);try{console.group(JSON.parse(JSON.stringify(r)))}catch(y){console.log("stringify error, origin: ",r)}console.groupEnd()},u=function(t){var r=t.params,y=t.pagination,v=t.sorter,l=t.filters,c=t.extra;o("search sevice args ",{params:r,pagination:y,sorter:v,filters:l,extra:c});var s=r||{},g=s.start,S=g===void 0?d()().toDate():g,A=s.end,j=A===void 0?d()().add(1,"year").toDate():A,h=s.classify,M=s.status,O=s.domain,Q=y||{},L=Q.current,D=Q.pageSize;return Promise.resolve().then(function(){return new Promise(function(W){setTimeout(function(){var T=45,C=Array.from({length:L*D>T?T%D:D}).map(function(K,B){return{id:L*D+B,status:M!=null?M:+i.We.random.numeric(1)%5,domain:"".concat(O?"".concat(O,"."):"").concat(i.We.internet.domainName()),subdomains:Array.from(new Set(Array.from({length:Math.floor(Math.random()*3)}).map(function(){return i.We.internet.domainName()}))).map(function(R){return{owner:i.We.company.name(),domain:R}}),classify:h!=null?h:Array.from(new Set(Array.from({length:Math.floor(Math.random()*3)}).map(function(){return+i.We.random.numeric(1)%5}))),date:d()(i.We.date.between(S,j)).format("YYYY-MM-DD"),img:i.We.image.avatar(),desc:i.We.lorem.paragraph()}});o("search response ",{list:C,total:T}),W({list:C,total:T})},456)})})},x=function(t,r,y,v){return o("on sort args ",{oldIndex:t,neoIndex:r,array:y,scope:v}),Promise.resolve()},E={batch:{load:function(t){return o("batch load args",t),Promise.resolve(t.$record)},cancel:function(t){o("batch cancel args",t)},submit:function(t,r){return o("batch submit args",{data:t,scope:r}),Promise.resolve()}},add:{load:function(t){return o("add load args",t),Promise.resolve(t.$record)},cancel:function(t){o("add cancel args",t)},submit:function(t,r){return o("add submit args",{data:t,scope:r}),Promise.resolve()}},update:{load:function(t){return o("update load args",t),Promise.resolve(t.$record)},cancel:function(t){o("update cancel args",t)},submit:function(t,r){return o("update submit args",{data:t,scope:r}),Promise.resolve()}},remove:{load:function(t){return o("remove load args",t),Promise.resolve(t.$record)},cancel:function(t){o("remove cancel args",t)},submit:function(t,r){return o("remove submit args",{data:t,scope:r}),Promise.resolve()}}},f={bool:function(){(0,n.registerDictLoader)("bool",function(t){return Promise.resolve([{label:"\u662F",value:1,color:"success"},{label:"\u5426",value:0,color:"error"}]).then(function(r){return t(r)})})},status:function(){(0,n.registerDictLoader)("status",function(t){return Promise.resolve([{label:"\u5DF2\u4E0A\u7EBF",value:0,color:"success"},{label:"\u8FD0\u884C\u4E2D",value:1,color:"processing"},{label:"\u5173\u95ED",value:2,color:"default"},{label:"\u5DF2\u5B95\u673A",value:3,color:"error"},{label:"\u5DF2\u8D85\u8F7D",value:4,color:"warning"}]).then(function(r){return t(r)})})},classify:function(){(0,n.registerDictLoader)("classify",function(t){return Promise.resolve([{label:"\u6587\u827A",value:0},{label:"\u559C\u5267",value:1},{label:"\u7231\u60C5",value:2},{label:"\u52A8\u753B",value:3},{label:"\u60AC\u7591",value:4},{label:"\u79D1\u5E7B",value:5}]).then(function(r){return t(r)})})}}}}]);
